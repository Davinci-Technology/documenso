apiVersion: v1
kind: ConfigMap
metadata:
  name: davinci-sign-config
  namespace: davinci-sign-production
  labels:
    app: davinci-sign
    environment: production
data:
  # Application
  PORT: "3000"
  NODE_ENV: "production"
  LOG_LEVEL: "info"

  # URLs
  NEXT_PUBLIC_WEBAPP_URL: "https://sign.davincisolutions.ai"
  NEXT_PRIVATE_INTERNAL_WEBAPP_URL: "http://davinci-sign:3000"

  # Database (Dedicated Azure PostgreSQL Flexible Server)
  # Password comes from secret, URL constructed in deployment
  POSTGRES_USER: "davinci_sign_admin"
  POSTGRES_DB: "davinci_sign"
  DB_HOST: "davinci-sign-postgres-prod.postgres.database.azure.com"
  DB_PORT: "5432"
  DB_SSLMODE: "require"

  # MinIO (in-cluster dedicated storage)
  NEXT_PUBLIC_UPLOAD_TRANSPORT: "s3"
  NEXT_PRIVATE_UPLOAD_ENDPOINT: "http://minio:9000"
  NEXT_PRIVATE_UPLOAD_FORCE_PATH_STYLE: "true"
  NEXT_PRIVATE_UPLOAD_REGION: "us-east-1"
  NEXT_PRIVATE_UPLOAD_BUCKET: "davinci-sign"
  NEXT_PRIVATE_UPLOAD_ACCESS_KEY_ID: "davinci-sign"

  # SMTP (SendGrid)
  NEXT_PRIVATE_SMTP_TRANSPORT: "smtp-auth"
  NEXT_PRIVATE_SMTP_HOST: "smtp.sendgrid.net"
  NEXT_PRIVATE_SMTP_PORT: "587"
  NEXT_PRIVATE_SMTP_USERNAME: "apikey"
  NEXT_PRIVATE_SMTP_FROM_NAME: "Davinci Sign"
  NEXT_PRIVATE_SMTP_FROM_ADDRESS: "noreply@davincisolutions.ai"
  NEXT_PRIVATE_SMTP_SECURE: "false"

  # Document Signing (certificate path)
  NEXT_PRIVATE_SIGNING_TRANSPORT: "local"
  NEXT_PRIVATE_SIGNING_LOCAL_FILE_PATH: "/opt/davinci-sign/cert.p12"

  # OIDC (Azure AD) - can be enabled for SSO
  # NEXT_PRIVATE_OIDC_WELL_KNOWN: "https://login.microsoftonline.com/953021b0-d492-4cc9-8551-e0b35080b03a/v2.0/.well-known/openid-configuration"
  # NEXT_PRIVATE_OIDC_PROVIDER_LABEL: "Sign in with Microsoft"
  # NEXT_PRIVATE_OIDC_SKIP_VERIFY: "true"

  # Features (billing disabled for internal use initially)
  NEXT_PUBLIC_FEATURE_BILLING_ENABLED: "false"
  NEXT_PUBLIC_DISABLE_SIGNUP: "false"
  NEXT_PUBLIC_DISABLE_ONBOARDING: "false"
  NEXT_PUBLIC_DOCUMENT_LINK_ENABLED: "true"

  # Document limits
  NEXT_PUBLIC_DOCUMENT_SIZE_UPLOAD_LIMIT: "50"

  # Telemetry (disabled for privacy)
  DOCUMENSO_DISABLE_TELEMETRY: "true"
